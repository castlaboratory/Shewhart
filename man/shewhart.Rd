% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot.R
\name{shewhart}
\alias{shewhart}
\title{Plots Shewhart phases based on the 7-points rule}
\usage{
shewhart(
  data,
  values_col,
  index_col,
  start_base = 10,
  type = "ggplot",
  rule = "7 points",
  model = "log",
  locale = "pt_BR",
  phase_changes = NULL,
  dummy_col = NULL,
  ...
)
}
\arguments{
\item{data}{A data frame or tibble containing at least two columns:
one representing time/index (dates or integers) and one representing
the measured values.}

\item{values_col}{Unquoted column name with the numeric values to be analyzed.}

\item{index_col}{Unquoted column name representing the index (could be dates
or integers).}

\item{start_base}{An integer specifying how many initial points are treated
as the base phase. Defaults to \code{10}.}

\item{type}{A character string, either \code{"ggplot"} (default) or
\code{"plotly"}, indicating which plotting system to use.}

\item{rule}{A character string indicating the control chart rule used.
Currently defaults to \code{"7 points"}. (Not actively used in the code,
but reserved for future extension.)}

\item{model}{A character string. One of \code{"log"}, \code{"loglog"}, or
\code{"gompertz"}. Passed to underlying modeling functions to determine
which transformation or curve to fit.}

\item{locale}{A character string specifying the language/locale
(e.g., \code{"pt_BR"} or \code{"en_US"}) for date/time labels and
text. Defaults to \code{"pt_BR"}.}

\item{phase_changes}{(Optional) A vector of index positions or dates where
known phase changes occur. If \code{NULL}, the function calls
\code{\link{shewhart_7points}} internally to detect them.}

\item{dummy_col}{(Optional) Unquoted column name representing a dummy variable
for advanced modeling. If \code{NULL}, no dummy variable is used. This is
typically used by \code{\link{shewhart_model}} or \code{\link{shewhart_fit}}
if you want to incorporate an additional factor in the model (e.g., a
step shift or grouping).}

\item{...}{Additional parameters (currently unused).}
}
\value{
A plot object:
\itemize{
  \item If \code{type = "ggplot"}, returns a \code{ggplot} object.
  \item If \code{type = "plotly"}, returns a \code{plotly} object.
}
}
\description{
Generates a control chart-like plot (either **ggplot2** or **plotly**) for a
time series, identifying potential phase changes according to the "7
consecutive points" rule.
}
\details{
\enumerate{
  \item If the input \code{data} does not yet have columns like
        \code{phase}, \code{phase_string}, \code{CL}, etc., then the
        function will:
        \itemize{
          \item call \code{\link{shewhart_7points}} to determine where phase
                changes occur (unless \code{phase_changes} is provided),
          \item call \code{\link{shewhart_model}} to fit the chosen model
                (\code{model}) and produce the data needed for plotting
                (limits, fitted values, etc.).
        }
  \item If \code{data} already has those columns from \code{\link{shewhart_model}},
        it uses them directly for plotting.
  \item The \code{type} argument decides whether a static \strong{ggplot2} chart
        or an interactive \strong{plotly} chart is returned.
}

The "7 consecutive points" rule is a simplified Shewhart-like rule that flags a
potential process change if seven successive points lie either entirely above
or below the central limit line.
}
\examples{
\dontrun{
library(dplyr)

# Example data
set.seed(123)
df <- tibble(
  time = seq.Date(from = as.Date("2021-01-01"), by = "day", length.out = 30),
  value = c(rpois(15, 5), rpois(15, 10))
)

# Basic usage with ggplot output
p <- shewhart(
  data       = df,
  values_col = value,
  index_col  = time,
  start_base = 5,
  type       = "ggplot",
  model      = "log",
  locale     = "en_US"
)
print(p)

# Or get a plotly interactive chart
p2 <- shewhart(
  data       = df,
  values_col = value,
  index_col  = time,
  start_base = 5,
  type       = "plotly",
  model      = "log"
)
p2
}

}
\seealso{
\code{\link{shewhart_7points}}, \code{\link{shewhart_model}}
}
